var width=960,height=500,color=d3.scale.category20(),force=d3.layout.force().charge(-120).linkDistance(30).size([width,height]),svg=d3.select("#interaction-graph").append("svg").attr("width",width).attr("height",height);d3.json("../miserables.json",function(e,t){if(e)throw e;force.nodes(t.nodes).links(t.links).start();var n=svg.selectAll(".link").data(t.links).enter().append("line").attr("class","link").style("stroke-width",function(e){return Math.sqrt(e.value)}),r=svg.selectAll(".node").data(t.nodes).enter().append("circle").attr("class","node").attr("r",5).style("fill",function(e){return color(e.group)}).call(force.drag);r.append("title").text(function(e){return e.name}),force.on("tick",function(){n.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),r.attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y})})});var genes=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:"../data/genes.json"}),variants=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:"../data/variants.json"});$(document).ready(function(){$("input.typeahead").typeahead({highlight:!0},{name:"genes",source:genes,templates:{header:'<h3 class="searchbar-header-genes">Genes</h3>'}},{name:"variants",source:variants,templates:{header:'<h3 class="searchbar-header-variants">Variants</h3>'}})}),$(document).ready(function(){$("input.typeahead").bind("typeahead:select",function(e,t){/^NM_[0-9]{5,}/i.test(t)?window.location.href="/variant/"+t:window.location.href="/gene/"+t})}),$(document).ready(function(){$("body").scrollspy({target:"#target_nav",offset:50})});