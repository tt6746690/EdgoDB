var edges=[];data.links.forEach(function(e){var t=data.nodes.filter(function(t){return t.ID===e.source})[0],a=data.nodes.filter(function(t){return t.ID===e.target})[0];edges.push({source:t,target:a,score:e.score})});var width=1200;height=1200;var color=d3.scale.category20(),force=d3.layout.force().charge(-30).linkDistance(20).size([width,height]),svg=d3.select("#interaction-graph").append("svg").attr("width",width).attr("height",height);force.nodes(data.nodes).links(edges).start(),svg.append("svg:defs").selectAll("marker").data(["end"]).enter().append("svg:marker").attr("id",String).attr("viewBox","0 -5 10 10").attr("refX",20).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5");var link=svg.selectAll(".link").data(edges).enter().append("line").attr("class","link").attr("marker-end","url(#end)").style("stroke-width",1).style("stroke-dasharray",function(e){return 0===e.score?"5,5":void 0}),node=svg.selectAll(".node").data(data.nodes).enter().append("circle").attr("class","node").attr("r",5).call(force.drag).style("fill",function(e){return/^NM_[0-9]{5,}/i.test(e.Name)?"#5bd0f0":"#d99db5"});node.on("dblclick.zoom",function(e){d3.event.stopPropagation();var t=window.innerWidth/2-e.x*zoom.scale(),a=window.innerHeight/2-e.y*zoom.scale();zoom.translate([t,a]),g.attr("transform","translate("+t+","+a+")scale("+zoom.scale()+")")}),node.append("title").text(function(e){return e.Name}),force.on("tick",function(){link.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),node.attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y})});var genes=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:"../data/genes.json"}),variants=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:"../data/variants.json"});$(document).ready(function(){$("input.typeahead").typeahead({highlight:!0},{name:"genes",source:genes,templates:{header:'<h3 class="searchbar-header-genes">Genes</h3>'}},{name:"variants",source:variants,templates:{header:'<h3 class="searchbar-header-variants">Variants</h3>'}})}),$(document).ready(function(){$("input.typeahead").bind("typeahead:select",function(e,t){/^NM_[0-9]{5,}/i.test(t)?window.location.href="/variant/"+t:window.location.href="/gene/"+t})}),$(document).ready(function(){$("body").scrollspy({target:"#target_nav",offset:50})});